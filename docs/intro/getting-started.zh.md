---
title: 快速上手
order: 1
---

# CIP Webservice 产品说明书

Rev. 0.01

Revison History
| Version | Date | Description | Publisher |
|:----|:----|:----|:----|
| 0.01 | 2019.08.28 | the first version | liaodingbai |
| | | | |

#

# 产品描述

CIP Webservice 是高可用、高性能的图片数据处理服务。提供图片处理、图片转码、水印、截图、瘦身等基础功能，底层基于 FPGA 加速技术，显著提高图像处理及图像分析的性能。
CIP Webservice 包括 Web 控制台、HTTP Restful API，支持多家云厂商平台的对象存储服务、未来还将基于容器技术打造了易扩展、易部署、高自由度的自定义图片处理平台，与客户 API 服务无缝兼容使用。

#

# 基本概念

本节将向您介绍 CIP webservice 产品中涉及的几个基本概念，以便于您更好地理解该产品。
**CIP（CTAccel 图像处理加速器）：**由 CTAccel 自主研发的，基于 FPGA 的图像处理加速解决方案，可通过将计算负载从 CPU 转移至 FPGA，显著提高图像处理及图像分析的性能。
**Webservice：**使应用程序可以和平台沟通的一种技术，沟通方式与编程语言无关，大大降低应用程序的接入成本。表达方式是一系列软件接口，描述了一组可以在网络上通过标准化的消息协议传递访问的操作。
**时延：**系统延迟，Webservice 在处理一个请求时的延迟，这里的延迟不包括请求数据和响应数据的往返延迟。
**并发量：**在相当一段时间内测量出来的系统单位时间处理的任务请求数（QPS），这里单位时间定义为每秒。

#

# 产品优势

CIP Webservice 强大的处理能力可为客户带来极大的优势，可将图像处理并发量提高 3-7 倍，将计算时延缩短 3 倍，并可将总体拥有成本降低 3 倍。CIP Webservice 同时采用业界一流的加速技术和成熟协议重新定义图像处理任务，其可大量利用数据并行算法来提高计算性能。（具体数值可参考*性能参考*章节）

**主要特性与优势：**

- 并发量增益：比 CPU 方案高 3-5 倍
- 时延缩短：比 CPU 方案 低 3 倍
- 性能稳定：比 CPU 方案的输出性能要稳定，随着并发量的增大，时延不会剧烈波动
- 总体拥有成本降低：降低 3 倍，可提高 DC 计算密度、减少机架
- 协议兼容性：采用 HTTP 通信协议，无平台兼容性问题
- 接口成熟：接口定义采用业界成熟的主流方式，稳定度高

# 功能说明

CIP Webservice 服务为图片文件提供以下功能：

- 图片格式转化（目前支持 webp、jpeg、png）
- 图片缩略操作
- 图片缩放、裁剪、旋转
- 获取图片格式、大小等基本信息
- 图片添加图片、文字、图文混合水印
- 计算图片的平均色调

**接口展示：**
| imageView2 | 图片基本处理接口可对图片进行缩略操作，生成各种缩略图。imageView2 接口可支持处理的原图片格式有 jpeg、png、webp。 |
|:----|:----:|
| imageMogr2 | 图片高级处理接口为开发者提供了一系列高级图片处理功能，包括缩放、裁剪、旋转等。imageMogr2 接口可支持处理的原图片格式有 jpeg、png、webp。 |
| imageInfo | 图片基本信息接口可以获取图片格式、大小等基本信息。可获取 JSON 格式的图片基本信息。 |
| watermark | 提供三种水印接口：图片水印接口、文字水印接口，以及一次请求中同时打多个图文水印接口。 |
| imageAve | 图片平均色调接口用于计算一幅图片的平均色调。 |

所有接口的详细使用说明请参考《CIP Webservice 接口说明书》

#

# 应用场景

**云端数据的处理:**
上传文件到云端存储后，可以配合图片处理服务进行云端的数据处理。

![图片](https://uploader.shimo.im/f/hLx5xdlyFcUKvGze.png)

#

# 性能参考

本组测试主要针对应用场景中比较常见的图片转码和缩放组合操作的测试（JPEG->WEBP + Resize），CIP 结果和传统 CPU 方案进行对比（测试仅供参考，具体需要根据业务方的实际场景）

**测试环境：**
| 操作系统 | Ubuntu 16.04.6 LTS |
|:----|:----|
| CPU | Intel(R) Xeon(R) CPU E5-2680 v4 @ 2.40GHz |
| Memory | 128G |
| FPGA 芯片 | Xilinx Corporation Device 8019 |

**测试结果：**

1. **CIP Vs CPU **1024 x 768 -> 240 x 180**:**

![图片](https://uploader.shimo.im/f/x7DDrbqPLR8sb868.png)

2. **CIP Vs CPU **1920 x 1080 -> 640x480**:**

![图片](https://uploader.shimo.im/f/SXg7K1X3uQQUjlMQ.png)
测试结果表明：

- CIP 时延稳定性要明显好于 CPU，在达到峰值之前，即使随着并发压力增大，时延还是足够稳定
- CIP 的时延大约是 CPU 的 1/3
- CIP 的最大并发量是 CPU 的 3 倍
